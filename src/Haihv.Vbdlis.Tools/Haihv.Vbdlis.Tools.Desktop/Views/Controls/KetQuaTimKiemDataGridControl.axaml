<UserControl
  x:Class="Haihv.Vbdlis.Tools.Desktop.KetQuaTimKiemDataGridControl"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="using:Haihv.Vbdlis.Tools.Desktop.ViewModels"
  xmlns:models="using:Haihv.Vbdlis.Tools.Desktop.Models"
  d:DesignHeight="600"
  d:DesignWidth="1000"
  x:DataType="vm:KetQuaTimKiemDataGridViewModel"
  mc:Ignorable="d">

  <Design.DataContext>
    <vm:KetQuaTimKiemDataGridViewModel />
  </Design.DataContext>

  <UserControl.Resources>
    <SolidColorBrush x:Key="PrimaryButtonBackgroundBrush" Color="#0F6CBD" />
    <SolidColorBrush x:Key="PrimaryButtonForegroundBrush" Color="#FFFFFF" />
    <SolidColorBrush x:Key="SuccessButtonBackgroundBrush" Color="#107C10" />
    <SolidColorBrush x:Key="SuccessButtonForegroundBrush" Color="#FFFFFF" />
  </UserControl.Resources>

  <UserControl.Styles>
    <Style Selector="Button.primary">
      <Setter Property="Background" Value="{StaticResource PrimaryButtonBackgroundBrush}" />
      <Setter Property="Foreground" Value="{StaticResource PrimaryButtonForegroundBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource PrimaryButtonBackgroundBrush}" />
    </Style>
    <Style Selector="Button.success">
      <Setter Property="Background" Value="{StaticResource SuccessButtonBackgroundBrush}" />
      <Setter Property="Foreground" Value="{StaticResource SuccessButtonForegroundBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource SuccessButtonBackgroundBrush}" />
    </Style>
  </UserControl.Styles>

  <DockPanel>
    <!--  Toolbar  -->
    <Border
      DockPanel.Dock="Top"
      Padding="8"
      Background="{DynamicResource SystemRegionBrush}"
      BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
      BorderThickness="0,0,0,1">
      <Grid ColumnDefinitions="Auto,Auto,*,Auto">
        <!--  Export Menu Button  -->
        <Button Grid.Column="0" Margin="0,0,8,0">
          <Button.Content>
            <StackPanel Orientation="Horizontal" Spacing="4">
              <TextBlock Text="ðŸ“Š" />
              <TextBlock Text="Xuáº¥t Excel" />
              <TextBlock Text="â–¼" FontSize="10" />
            </StackPanel>
          </Button.Content>
          <Button.Flyout>
            <MenuFlyout Placement="BottomEdgeAlignedLeft">
              <MenuItem
                Command="{Binding ExportExcelCompactCommand}"
                Header="Xuáº¥t Excel - Dáº¡ng Compact"
                IsEnabled="{Binding !IsExporting}">
                <MenuItem.Icon>
                  <TextBlock Text="ðŸ“„" />
                </MenuItem.Icon>
              </MenuItem>
              <MenuItem
                Command="{Binding ExportExcelFullCommand}"
                Header="Xuáº¥t Excel - Äáº§y Ä‘á»§"
                IsEnabled="{Binding !IsExporting}">
                <MenuItem.Icon>
                  <TextBlock Text="ðŸ“‹" />
                </MenuItem.Icon>
              </MenuItem>
            </MenuFlyout>
          </Button.Flyout>
        </Button>

        <!--  Status Message  -->
        <TextBlock
          Grid.Column="2"
          VerticalAlignment="Center"
          FontStyle="Italic"
          IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
          Text="{Binding StatusMessage}" />

        <!--  Loading Indicator  -->
        <StackPanel
          Grid.Column="3"
          Orientation="Horizontal"
          Spacing="8"
          IsVisible="{Binding IsExporting}">
          <ProgressBar
            Width="100"
            Height="4"
            VerticalAlignment="Center"
            IsIndeterminate="True" />
          <TextBlock VerticalAlignment="Center" Text="Äang xuáº¥t..." />
        </StackPanel>
      </Grid>
    </Border>

    <!--  DataGrid  -->
    <DataGrid
      AutoGenerateColumns="False"
      GridLinesVisibility="All"
      IsReadOnly="True"
      ItemsSource="{Binding KetQuaTimKiemList}"
      SelectedItem="{Binding SelectedItem}">
      <DataGrid.Columns>
        <!--  Chá»§ sá»­ dá»¥ng  -->
        <DataGridTextColumn
          Width="*"
          MinWidth="250"
          Binding="{Binding ChuSuDung.DisplayInfo}"
          Header="Chá»§ sá»­ dá»¥ng" />

        <!--  Giáº¥y chá»©ng nháº­n  -->
        <DataGridTextColumn
          Width="*"
          MinWidth="250"
          Binding="{Binding GiayChungNhanModel.DisplayInfo}"
          Header="Giáº¥y chá»©ng nháº­n" />

        <!--  Thá»­a Ä‘áº¥t  -->
        <DataGridTextColumn
          Width="*"
          MinWidth="250"
          Binding="{Binding ThuaDatModel.DisplayInfo}"
          Header="Thá»­a Ä‘áº¥t" />

        <!--  TÃ i sáº£n  -->
        <DataGridTextColumn
          Width="*"
          MinWidth="250"
          Binding="{Binding TaiSan.DisplayInfo}"
          Header="TÃ i sáº£n" />
      </DataGrid.Columns>
    </DataGrid>
  </DockPanel>
</UserControl>
