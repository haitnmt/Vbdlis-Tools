<UserControl
  x:Class="Haihv.Vbdlis.Tools.Desktop.KetQuaTimKiemDataGridControl"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:models="using:Haihv.Vbdlis.Tools.Desktop.Models"
  xmlns:vm="using:Haihv.Vbdlis.Tools.Desktop.ViewModels"
  d:DesignHeight="600"
  d:DesignWidth="1000"
  x:DataType="vm:KetQuaTimKiemDataGridViewModel"
  mc:Ignorable="d">

  <Design.DataContext>
    <vm:KetQuaTimKiemDataGridViewModel />
  </Design.DataContext>

  <UserControl.Resources>
    <SolidColorBrush x:Key="PrimaryButtonBackgroundBrush" Color="#0F6CBD" />
    <SolidColorBrush x:Key="PrimaryButtonForegroundBrush" Color="#FFFFFF" />
    <SolidColorBrush x:Key="SuccessButtonBackgroundBrush" Color="#107C10" />
    <SolidColorBrush x:Key="SuccessButtonForegroundBrush" Color="#FFFFFF" />
  </UserControl.Resources>

  <UserControl.Styles>
    <Style Selector="Button.primary">
      <Setter Property="Background" Value="{StaticResource PrimaryButtonBackgroundBrush}" />
      <Setter Property="Foreground" Value="{StaticResource PrimaryButtonForegroundBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource PrimaryButtonBackgroundBrush}" />
    </Style>
    <Style Selector="Button.success">
      <Setter Property="Background" Value="{StaticResource SuccessButtonBackgroundBrush}" />
      <Setter Property="Foreground" Value="{StaticResource SuccessButtonForegroundBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource SuccessButtonBackgroundBrush}" />
    </Style>
  </UserControl.Styles>

  <DockPanel>
    <!--  Toolbar  -->
    <Border
      Padding="8"
      Background="{DynamicResource SystemRegionBrush}"
      BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
      BorderThickness="0,0,0,1"
      DockPanel.Dock="Top">
      <Grid ColumnDefinitions="Auto,Auto,*,Auto">
        <!--  Export Menu Button  -->
        <Button Grid.Column="0" Margin="0,0,8,0">
          <Button.Content>
            <StackPanel Orientation="Horizontal" Spacing="4">
              <TextBlock Text="ðŸ“Š" />
              <TextBlock Text="Xuáº¥t Excel" />
              <TextBlock FontSize="10" Text="â–¼" />
            </StackPanel>
          </Button.Content>
          <Button.Flyout>
            <MenuFlyout Placement="BottomEdgeAlignedLeft">
              <MenuItem
                Command="{Binding ExportExcelCompactCommand}"
                Header="Xuáº¥t Excel - Dáº¡ng Compact"
                IsEnabled="{Binding !IsExporting}">
                <MenuItem.Icon>
                  <TextBlock Text="ðŸ“„" />
                </MenuItem.Icon>
              </MenuItem>
              <MenuItem
                Command="{Binding ExportExcelFullCommand}"
                Header="Xuáº¥t Excel - Äáº§y Ä‘á»§"
                IsEnabled="{Binding !IsExporting}">
                <MenuItem.Icon>
                  <TextBlock Text="ðŸ“‹" />
                </MenuItem.Icon>
              </MenuItem>
            </MenuFlyout>
          </Button.Flyout>
        </Button>

        <!--  Status Message  -->
        <TextBlock
          Grid.Column="2"
          VerticalAlignment="Center"
          FontStyle="Italic"
          IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
          Text="{Binding StatusMessage}" />

        <!--  Loading Indicator  -->
        <StackPanel
          Grid.Column="3"
          IsVisible="{Binding IsExporting}"
          Orientation="Horizontal"
          Spacing="8">
          <ProgressBar
            Width="100"
            Height="4"
            VerticalAlignment="Center"
            IsIndeterminate="True" />
          <TextBlock VerticalAlignment="Center" Text="Äang xuáº¥t..." />
        </StackPanel>
      </Grid>
    </Border>

    <!--  DataGrid  -->
    <DataGrid
      AutoGenerateColumns="False"
      GridLinesVisibility="All"
      IsReadOnly="True"
      ItemsSource="{Binding KetQuaTimKiemList}"
      SelectedItem="{Binding SelectedItem, Mode=OneWay}">
      <DataGrid.Columns>
        <!--  Chá»§ sá»­ dá»¥ng  -->
        <DataGridTemplateColumn
          Width="*"
          MinWidth="300"
          Header="ThÃ´ng tin chá»§ sá»­ dá»¥ng">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <SelectableTextBlock
                Margin="4"
                Text="{Binding ChuSuDung.DanhSachChuSoHuu}"
                TextWrapping="Wrap" />
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <!--  Giáº¥y chá»©ng nháº­n  -->
        <DataGridTemplateColumn
          Width="*"
          MinWidth="250"
          Header="ThÃ´ng tin giáº¥y chá»©ng nháº­n">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <StackPanel Margin="4" Spacing="2">
                <SelectableTextBlock TextWrapping="Wrap">
                  <Run Text="Sá»‘ phÃ¡t hÃ nh: " />
                  <Run FontWeight="Bold" Text="{Binding GiayChungNhanModel.SoPhatHanh}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding GiayChungNhanModel.SoVaoSo, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" TextWrapping="Wrap">
                  <Run Text="Sá»‘ vÃ o sá»•: " />
                  <Run FontWeight="Bold" Text="{Binding GiayChungNhanModel.SoVaoSo}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding GiayChungNhanModel.HasNgayVaoSo}" TextWrapping="Wrap">
                  <Run Text="NgÃ y vÃ o sá»•: " />
                  <Run FontWeight="Bold" Text="{Binding GiayChungNhanModel.NgayVaoSoFormatted}" />
                </SelectableTextBlock>
              </StackPanel>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <!--  Thá»­a Ä‘áº¥t  -->
        <DataGridTemplateColumn
          Width="*"
          MinWidth="250"
          Header="ThÃ´ng tin thá»­a Ä‘áº¥t">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <StackPanel
                Margin="4"
                IsVisible="{Binding ThuaDatModel, Converter={x:Static ObjectConverters.IsNotNull}}"
                Spacing="2">
                <SelectableTextBlock IsVisible="{Binding ThuaDatModel.SoToBanDo, Converter={x:Static StringConverters.IsNotNullOrEmpty}, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Sá»‘ tá» báº£n Ä‘á»“: " />
                  <Run FontWeight="Bold" Text="{Binding ThuaDatModel.SoToBanDo, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding ThuaDatModel.SoThuaDat, Converter={x:Static StringConverters.IsNotNullOrEmpty}, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Sá»‘ thá»­a Ä‘áº¥t: " />
                  <Run FontWeight="Bold" Text="{Binding ThuaDatModel.SoThuaDat, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding ThuaDatModel.HasDienTich, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Diá»‡n tÃ­ch: " />
                  <Run FontWeight="Bold" Text="{Binding ThuaDatModel.DienTichFormatted, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding ThuaDatModel.MucDichSuDung, Converter={x:Static StringConverters.IsNotNullOrEmpty}, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Má»¥c Ä‘Ã­ch sá»­ dá»¥ng: " />
                  <Run FontWeight="Bold" Text="{Binding ThuaDatModel.MucDichSuDung, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding ThuaDatModel.DiaChi, Converter={x:Static StringConverters.IsNotNullOrEmpty}, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Äá»‹a chá»‰: " />
                  <Run FontWeight="Bold" Text="{Binding ThuaDatModel.DiaChi, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
              </StackPanel>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <!--  TÃ i sáº£n  -->
        <DataGridTemplateColumn
          Width="*"
          MinWidth="250"
          Header="ThÃ´ng tin tÃ i sáº£n">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <StackPanel
                Margin="4"
                IsVisible="{Binding TaiSan, Converter={x:Static ObjectConverters.IsNotNull}}"
                Spacing="2">
                <SelectableTextBlock IsVisible="{Binding TaiSan.LoaiTaiSan, Converter={x:Static StringConverters.IsNotNullOrEmpty}, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Loáº¡i tÃ i sáº£n: " />
                  <Run FontWeight="Bold" Text="{Binding TaiSan.LoaiTaiSan, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding TaiSan.HasDienTichXayDung, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Diá»‡n tÃ­ch xÃ¢y dá»±ng: " />
                  <Run FontWeight="Bold" Text="{Binding TaiSan.DienTichXayDungFormatted, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding TaiSan.HasDienTichSuDung, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Diá»‡n tÃ­ch sá»­ dá»¥ng: " />
                  <Run FontWeight="Bold" Text="{Binding TaiSan.DienTichSuDungFormatted, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding TaiSan.SoTang, Converter={x:Static StringConverters.IsNotNullOrEmpty}, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Sá»‘ táº§ng: " />
                  <Run FontWeight="Bold" Text="{Binding TaiSan.SoTang, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
                <SelectableTextBlock IsVisible="{Binding TaiSan.DiaChi, Converter={x:Static StringConverters.IsNotNullOrEmpty}, FallbackValue=False}" TextWrapping="Wrap">
                  <Run Text="Äá»‹a chá»‰: " />
                  <Run FontWeight="Bold" Text="{Binding TaiSan.DiaChi, FallbackValue='', TargetNullValue=''}" />
                </SelectableTextBlock>
              </StackPanel>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
      </DataGrid.Columns>
    </DataGrid>
  </DockPanel>
</UserControl>
